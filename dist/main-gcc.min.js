(function(){this.Scrabble=function(){function g(){}g.defaultView=function(){return{PLAYER:{ONE:{SCORE:"p1score",NAME:"p1name",MSG:"p1message"},TWO:{SCORE:"p2score",NAME:"p2name",MSG:"p2message"}},MESSAGE:"message",NOTICE:"notice",GRID:"grid"}};return g}()}).call(this);
(function(){var g,h,l,c,f,a;g=this.Scrabble.Tile=function(){return function(){}}();f={A:9,B:2,C:2,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1};a=0;for(c in f)l=f[c],a+=l;h=function(){var d;d=[];for(c in f)d.push(c);return d}().sort();g.total=function(){return a};g.alphabet=function(){return h.slice(0)};g.randomLetter=function(){var d,b,e,k;d=Math.ceil(Math.random()*a);b=1;e=0;for(k=h.length;e<k;e++)if(c=h[e],b+=f[c],b>d)return c}}).call(this);
(function(){var g,h,l,c,f=[].indexOf||function(a){for(var d=0,b=this.length;d<b;d++)if(d in this&&this[d]===a)return d;return-1};h=this.Scrabble.TileFinder=function(){return function(){}}();g=h.MIN_TILE_LENGTH=2;c=function(a,d){var b,e,k,c;e=a.range;k="";for(b=c=0;0<=e?c<e:c>e;b=0<=e?++c:--c)b=d(b),null!=b&&(k+=b);if(k.length===e)return k};l=function(a,d){var b,e,k,c,r,h;e=a.range;c=[];for(k=r=g;g<=e?r<=e:r>=e;k=g<=e?++r:--r)for(b=h=0;0<=k?h<k:h>k;b=0<=k?++h:--h)b=d(k,b),null==b||0<=f.call(c,b)||
c.push(b);return c};h.verticalOne=function(a){var d,b,e,k;b=a.grid;e=a.range;d=a.x;k=a.y;return c({grid:b,range:e,x:d,y:k},function(a){var e;return null!=(e=b[k+a])?e[d]:void 0})};h.horizontalOne=function(a){var d,b,e,k;b=a.grid;e=a.range;d=a.x;k=a.y;return c({grid:b,range:e,x:d,y:k},function(a){var e;return null!=(e=b[k])?e[d+a]:void 0})};h.diagonalOne_upperLeft_to_lowerRight=function(a){var d,b,e,k;b=a.grid;e=a.range;d=a.x;k=a.y;return c({grid:b,range:e,x:d,y:k},function(a){var e;return null!=(e=
b[k+a])?e[d+a]:void 0})};h.diagonalOne_lowerLeft_to_upperRight=function(a){var d,b,e,k;b=a.grid;e=a.range;d=a.x;k=a.y;return c({grid:b,range:e,x:d,y:k},function(a){var e;return null!=(e=b[k-a])?e[d+a]:void 0})};h.verticalTiles=function(a){var d,b,e,k;d=a.grid;b=a.range;e=a.x;k=a.y;return l({grid:d,range:b,x:e,y:k},function(a,b){return h.verticalOne({grid:d,x:e,y:k-b,range:a})})};h.horizontalTiles=function(a){var d,b,e,k;d=a.grid;b=a.range;e=a.x;k=a.y;return l({grid:d,range:b,x:e,y:k},function(a,b){return h.horizontalOne({grid:d,
x:e-b,y:k,range:a})})};h.diagonalTiles_upperLeft_to_lowerRight=function(a){var d,b,e,k;d=a.grid;b=a.range;e=a.x;k=a.y;return l({grid:d,range:b,x:e,y:k},function(a,b){return h.diagonalOne_upperLeft_to_lowerRight({grid:d,x:e-b,y:k-b,range:a})})};h.diagonalTiles_lowerLeft_to_upperRight=function(a){var d,b,e,k;d=a.grid;b=a.range;e=a.x;k=a.y;return l({grid:d,range:b,x:e,y:k},function(a,b){return h.diagonalOne_lowerLeft_to_upperRight({grid:d,x:e-b,y:k+b,range:a})})};h.all=function(a){var d,b,e,k,c,g,h,
l,m,n,p;b=a.grid;e=a.range;c=a.x;g=a.y;a=[];p=[this.verticalTiles,this.horizontalTiles,this.diagonalTiles_upperLeft_to_lowerRight,this.diagonalTiles_lowerLeft_to_upperRight];h=0;for(m=p.length;h<m;h++)for(d=p[h],k=d({grid:b,range:e,x:c,y:g}),l=0,n=k.length;l<n;l++)d=k[l],0>f.call(a,d)&&a.push(d);return a}}).call(this);
(function(){var g,h,l=[].indexOf||function(c){for(var f=0,a=this.length;f<a;f++)if(f in this&&this[f]===c)return f;return-1};g=this.Scrabble;h=g.TileFinder;g.WordFinder=function(){function c(){}c.isWord=function(c){return 0<=l.call(c.dictionary,c.word)};c.all=function(c){var a,d,b,e,k;d=c.grid;a=c.dictionary;c=h.all({grid:d,dictionary:a,range:c.range,x:c.x,y:c.y});k=[];b=0;for(e=c.length;b<e;b++)d=c[b],this.isWord({word:d,dictionary:a})&&k.push(d);return k};return c}()}).call(this);
(function(){var g,h,l;g=this.Scrabble;h=g.Tile;l=g.TileFinder;g=g.Util=function(){return function(){}}();g.isInteger=function(c){return c===Math.round(c)};g.inRange=function(c){var f,a,d;a=c.value;f=c.range;d=c.x;c=c.y;if(null!=a)return this.isInteger(a)&&0<=a&&a<f;if(null!=d&&null!=c)return this.inRange({value:d,range:f})&&this.inRange({value:c,range:f})};g.setCoordinate=function(c){var f,a,d,b;f=c.coordinates;a=c.range;d=c.x;b=c.y;c=c.value;f[d]||(f[d]=[]);this.inRange({value:d,range:a})&&this.inRange({value:b,
range:a})?f[d][b]=c:f[d][b]=void 0;return!!f[d][b]};g.getCoordinate=function(c){return c.coordinates[c.x][c.y]};g.generateGrid=function(c){var f,a;a=[];for(f=0;0<=c?f<c:f>c;0<=c?++f:--f)a.push(function(){var a,b;b=[];for(a=0;0<=c?a<c:a>c;0<=c?++a:--a)b.push(h.randomLetter());return b}());return a};g.printGrid=function(c){var f;f=this.matrix(c);var a,d,b;b=[];a=0;for(d=f.length;a<d;a++)c=f[a],b.push(" "+c.join(" | "));return b.join("\n")};g.matrix=function(c){var f,a,d,b,e;e=[];f=d=0;for(b=c.length;0<=
b?d<b:d>b;f=0<=b?++d:--d)e.push(function(){var b,d,e;e=[];a=b=0;for(d=c[f].length;0<=d?b<d:b>d;a=0<=d?++b:--b)e.push(c[f][a]);return e}());return e};g.wordList=function(c){var f,a,d,b,e,k;f=c.size;a=c.words;k=[];d=0;for(b=a.length;d<b;d++)c=a[d],l.MIN_TILE_LENGTH<=(e=c.length)&&e<=f&&k.push(c);return k};g.isMatrixQuadratic=function(c){var f,a,d;if(!c)return!1;a=0;for(d=c.length;a<d;a++)if(f=c[a],c.length!==f.length)return!1;return!0};g.sizeMatrix=function(c){if(this.isMatrixQuadratic(c))return c.length};
g.isValidSwapCoordinates=function(c){var f,a,d,b,e,k;d=c.x1;e=c.y1;b=c.x2;k=c.y2;c=c.range;f=Math.abs(b-d);a=Math.abs(k-e);return(f=0<f&&0<a?!1:1===f||1===a)&&null!=c?this.inRange({x:d,y:e,range:c})&&this.inRange({x:b,y:k,range:c}):f};g.createSwapCoordinate=function(c,f){return{x1:c.x,y1:c.y,x2:f.x,y2:f.y}};g.createSwipeCoordinate=function(c,f){var a,d,b,e;a=c.x;b=c.y;d=f.x;e=f.y;null!=d&&(a+=d);null!=e&&(b+=e);return{x:a,y:b}};g.Message=function(){function c(){}var f;f=function(a){var d,b;d=a.player;
a=a.score;return{name:null!=d?"function"===typeof d.name?d.name():void 0:void 0,numberWords:null!=a?null!=(b=a.newWords)?b.length:void 0:void 0,points:null!=a?a.points:void 0,words:(null!=a?a.newWords:void 0)||[]}};c.points=function(a){var d,b,e,c,g;b=a.player;b=f({player:b,score:a.score});a="";g=b.words;e=0;for(c=g.length;e<c;e++)d=g[e],a+="<strong>"+d+"</strong> ";d=""+b.name+" formed the following "+b.numberWords+" word(s):";return d+("<br>"+a+"<br>")+("Earning <strong>"+b.points+"</strong> points")};
c.tile=function(a){var d,b;d=a.tile;a=a.player;a=null!=a?a.name():void 0;return null!=d?(b=d.coordinate||{},d=b.x,b=b.y,""+a+" selected tile ("+d+", "+b+"). Please select a second tile."):""+a+", please select a tile."};return c}()}).call(this);
(function(){this.Scrabble.Player=function(){return function(g){var h,l,c,f;l=(null!=g?g:{}).name;g=[0,0,[]];c=g[0];h=g[1];f=g[2];this.name=function(){return l};this.score=function(){return c};this.moveCount=function(){return h};this.words=function(){var a,d,b,e;e=[];d=0;for(b=f.length;d<b;d++)a=f[d],e.push(a);return e};this.move=function(a){var d;d=null!=a?a:{};a=d.board;d=d.swapCoordinates;if(null!=a||null!=d)return a=a.move(d),null!=a&&(h++,c+=a.points,f.push.apply(f,a.newWords),f.sort()),a}}}()}).call(this);
(function(){var g,h,l,c,f,a=[].indexOf||function(a){for(var b=0,e=this.length;b<e;b++)if(b in this&&this[b]===a)return b;return-1};h=this.Scrabble;l=h.Util;f=h.WordFinder;c={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10};g=h.Score=function(){return function(d){var b,e;e=d.grid;b=d.dictionary;this.printGrid=function(){return l.printGrid(e)};this.matrix=function(){return l.matrix(e)};this.moveScore=function(a){return g.moveScore({grid:e,dictionary:b,
swapCoordinates:a})};this.scoreWord=function(d){return 0<=a.call(b,d)?g.scoreWord(d):0};this.words=function(){return g.words({grid:e,dictionary:b})}}}();g.words=function(d){var b,e,c,g,h,l,q,m,n,p;e=d.grid;d=d.dictionary;b=[[],e.length];g=b[0];b=b[1];for(l=q=0;0<=b?q<b:q>b;l=0<=b?++q:--q)for(c=m=0;0<=b?m<b:m>b;c=0<=b?++m:--m)for(h=f.all({grid:e,dictionary:d,x:l,y:c,range:b}),n=0,p=h.length;n<p;n++)c=h[n],0>a.call(g,c)&&g.push(c);return g};g.move=function(a){var b,e,c,f,g,h;e=a.grid;h=a.swapCoordinates;
a=h.x1;g=h.y1;b=h.x2;h=h.y2;f=l.sizeMatrix(e);c=l.isValidSwapCoordinates({x1:a,y1:g,x2:b,y2:h,range:f});return null!=f&&c?(c=[e[g][a],e[h][b]],e[h][b]=c[0],e[g][a]=c[1],!0):!1};g.moveScore=function(a){var b,e,c;e=a.grid;b=a.dictionary;c=a.swapCoordinates;a=this.words({grid:e,dictionary:b});if(this.move({grid:e,swapCoordinates:c}))return b=this.words({grid:e,dictionary:b}),b=this.newWords({before:a,after:b}),{points:this.scoreWords(b),newWords:b}};g.scoreWord=function(a){var b,e,k,f;k=e=0;for(f=a.length;k<
f;k++)b=a[k],e+=c[b];return e};g.scoreWords=function(a){var b,c,k,f,g;b=[0,a.length];c=b[0];b=b[1];f=0;for(g=a.length;f<g;f++)k=a[f],c+=this.scoreWord(k);return c*b};g.newWords=function(d){var b,c,k,f,g;c=d.before;b=d.after;g=[];k=0;for(f=b.length;k<f;k++)d=b[k],0>a.call(c,d)&&g.push(d);return g}}).call(this);
(function(){var g,h,l,c,f;l=this.Scrabble;c=l.Util;h=l.Score;f=l.WordFinder;g=l.Board=function(){function a(a){var b,e,k,l;e=a.size;l=a.words;b=a.grid;c.isMatrixQuadratic(b)?e=c.sizeMatrix(b):b=void 0;if(!g.isValidSize(e))throw Error("Grid size not given");b||(b=c.generateGrid(e));k=c.wordList({size:e,words:l});this.score=new h({grid:b,dictionary:k});this.size=function(){return e};this.isWord=function(a){return f.isWord({word:a,dictionary:k})};this.move=function(a){return this.score.moveScore(a)};
this.str=function(){return c.printGrid(b)};this.matrix=function(){return c.matrix(b)};this.set=function(a){return c.setCoordinate({coordinates:b,range:e,x:a.x,y:a.y,value:a.value})};this.get=function(a){return c.getCoordinate({coordinates:b,x:a.x,y:a.y})}}a.prototype.inRange=function(a){return c.inRange({value:a,range:this.size()})};return a}();g.isValidSize=function(a){return!a||0>a?!1:!0}}).call(this);
(function(){var g,h,l,c,f,a,d;f=this.Scrabble;g=f.Board;c=f.Player;a=f.Util;d=f.defaultView;h=d();l=f.Game=function(){function b(a){this.words=(null!=a?a:{}).words;if(null==this.words)throw Error("Board or words was not given");}var d;b.prototype["new"]=function(a){var b,d,e,f,l=this;b=null!=a?a:{};f=b.size;d=b.player1;e=b.player2;a=b.board;this.DOM=b.DOM;b=b.VIEW;this.board=a||new g({size:f||5,words:this.words});this.currentPlayer=this.player1=d||new c({name:"Player 1"});this.player2=e||new c({name:"Player 2"});
this.VIEW=b||h;this.move=function(a){l.lastMove=$.extend({},{swapCoordinates:a});a=l.currentPlayer.move({board:l.board,swapCoordinates:a});l.message(a);a&&(l.notice(a),$.extend(l.lastMove,a),l.currentPlayer=l.currentPlayer===l.player1?l.player2:l.player1,l.view.update());return l.lastMove};this.initView();return this};d=function(b){var d;null==this.view.selectedTile?(this.view.selectedTile=$.extend({},b),this.view.selectedTile.$el.addClass("selected"),this.message(!1)):(d=this.view.selectedTile.coordinate,
b=b.coordinate,d=a.createSwapCoordinate(d,b),this.move(d),this.view.selectedTile.$el.removeClass("selected"),this.view.selectedTile=void 0,this.message(this.lastMove.points))};b.prototype.initView=function(a){var b,c=this;b=(null!=a?a:{}).watchTiles;this.view=new l.View({ELEMENTS:this.VIEW,context:this.DOM,game:this});this.view.updatePlayerNames();this.view.update();this.message(!1);this.view.watchTiles(function(a){return null!=b?b(a):d.call(c,a)})};b.prototype.message=function(b){var d,c;c=this.currentPlayer;
d=h.MESSAGE;c=a.Message.tile({tile:this.view.selectedTile,player:c});null==b&&(c="Invalid move. "+c);l.View.showMessage({message:c,context:this.DOM,id:d})};b.prototype.notice=function(b){var d,c;null!=b&&(c=this.currentPlayer,d=h.NOTICE,b=a.Message.points({player:c,score:b}),l.View.showMessage({message:b,context:this.DOM,id:d}))};return b}()}).call(this);
(function(){var g,h,l,c;h=this.Scrabble;l=h.Util;g=h.Game;h=h.defaultView;h();c=g.View=function(){function f(a){var d,b,c,f,g,h,l,q,m,n,p,s,t,u;b=null!=a?a:{};a=b.ELEMENTS;d=b.context;this.game=b.game;this.watcherTiles=[];this.$p1name=$("#"+(null!=a?null!=(c=a.PLAYER)?null!=(l=c.ONE)?l.NAME:void 0:void 0:void 0),d);this.$p1score=$("#"+(null!=a?null!=(q=a.PLAYER)?null!=(m=q.ONE)?m.SCORE:void 0:void 0:void 0),d);this.$p1message=$("#"+(null!=a?null!=(n=a.PLAYER)?null!=(p=n.ONE)?p.MSG:void 0:void 0:void 0),
d);this.$p2name=$("#"+(null!=a?null!=(s=a.PLAYER)?null!=(t=s.TWO)?t.NAME:void 0:void 0:void 0),d);this.$p2score=$("#"+(null!=a?null!=(u=a.PLAYER)?null!=(f=u.TWO)?f.SCORE:void 0:void 0:void 0),d);this.$p2message=$("#"+(null!=a?null!=(g=a.PLAYER)?null!=(h=g.TWO)?h.MSG:void 0:void 0:void 0),d);this.$grid=$("#"+(null!=a?a.GRID:void 0),d)}f.prototype.updateScore=function(){var a,d,b,c,f;a=null!=(d=this.game)?null!=(b=d.player1)?b.score():void 0:void 0;d=null!=(c=this.game)?null!=(f=c.player2)?f.score():
void 0:void 0;this.$p1score.html(a);this.$p2score.html(d)};f.prototype.updatePlayerNames=function(){this.$p1name.html(this.game.player1.name());this.$p2name.html(this.game.player2.name())};f.prototype.updatePlayerWords=function(){var a,d,b,c,f,g;d=a="";g=this.game.player1.words();c=0;for(f=g.length;c<f;c++)b=g[c],a+=""+b+" ";g=this.game.player2.words();c=0;for(f=g.length;c<f;c++)b=g[c],d+=""+b+" ";this.$p1message.html(""+a);this.$p2message.html(""+d)};f.prototype.updateGrid=function(){var a,d,b,e;
this.$grid.empty().append(c.createGrid(this.game.board.matrix()));e=this.watcherTiles;d=0;for(b=e.length;d<b;d++)a=e[d],this.registerWatchTiles(a)};f.prototype.update=function(){this.updateScore();this.updatePlayerWords();this.updateGrid()};f.prototype.watchTiles=function(a){this.watcherTiles.push(a);this.registerWatchTiles(a)};f.prototype.registerWatchTiles=function(a){var d,b;d=this.$grid;b={};d.find("li").on({catchTileInfo:function(e){var f,g,h;f=c.getCoordinate({grid:d,tile:this});h=l.createSwipeCoordinate(f,
e.data||{});g=l.createSwapCoordinate(f,h);$.extend(b,{coordinate:f,el:this,$el:$(this)});null!=e.data&&$.extend(b,{swipeCoordinate:h,swapCoordinate:g});return a(b)},click:function(){return $(this).trigger("catchTileInfo")},swipeRight:function(){return $(this).trigger("catchTileInfo",{x:1})},swipeLeft:function(){return $(this).trigger("catchTileInfo",{x:-1})},swipeUp:function(){return $(this).trigger("catchTileInfo",{y:-1})},swipeDown:function(){return $(this).trigger("catchTileInfo",{y:1})}})};f.prototype.unwatchTiles=
function(){this.watcherTiles=[];this.$grid.find("li").off()};return f}();c.showMessage=function(c){var a;a=null!=c?c:{};c=a.message;$("#"+a.id,a.context).html(c)};c.createGridLine=function(c){var a,d,b,e;a="";b=0;for(e=c.length;b<e;b++)d=c[b],a+="<li>"+d+"</li>";return $(a)};c.createGrid=function(c){var a,d,b,e,g;a=$("<div>");e=0;for(g=c.length;e<g;e++)d=c[e],b=$("<ul>"),a.append(b.append(this.createGridLine(d)));return a.contents()};c.getCoordinate=function(c){var a,d,b;c=$(c.tile);d=c.parent();
a=d.children();b=d.parent().children();return{x:a.index(c),y:b.index(d)}}}).call(this);
