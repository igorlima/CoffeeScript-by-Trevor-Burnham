(function(){var d,e;e=this.Scrabble||(this.Scrabble={});d=e.Board=function(){function b(b){var c,a,g,k,h;g=b.size;h=b.words;c=b.grid;e.Util.isMatrixQuadratic(c)?g=e.Util.sizeMatrix(c):c=void 0;if(!d.isValidSize(g))throw"Grid size not given";c||(c=e.Util.generateGrid(g));k=e.Util.wordList({size:g,words:h});a=new e.Score({grid:c,dictionary:h});this.size=function(){return g};this.isWord=function(a){return e.WordFinder.isWord({word:a,dictionary:k})};this.move=function(g){return a.moveScore(g)};this.str=
function(){return e.Util.printGrid(c)};this.matrix=function(){return e.Util.matrix(c)};this.set=function(a){return e.Util.setCoordinate({coordinates:c,range:g,x:a.x,y:a.y,value:a.value})};this.get=function(a){return e.Util.getCoordinate({coordinates:c,x:a.x,y:a.y})}}b.prototype.inRange=function(b){return e.Util.inRange({value:b,range:this.size()})};return b}();d.isValidSize=function(b){return!b||0>b?!1:!0}}).call(this);
(function(){var d;d=this.Scrabble||(this.Scrabble={});d.Game=function(){function e(b){b=null!=b?b:{};this.board=b.board;this.player1=b.player1;this.player2=b.player2;this.currentPlayer=this.player1}e.prototype["new"]=function(){this.board=d.Board({size:5,words:Words});this.currPLayer=this.player1=new d.Player({name:"Player 1"});return this.player2=new d.Player({name:"Player 2"})};e.prototype.updateView=function(){if(null!=this.player1&&null!=this.player2)return $("#p1name").html(this.player1.name()),
$("#p1score").html(0),$("#p2name").html(this.player2.name()),$("#p2score").html(0)};return e}()}).call(this);(function(){(this.Scrabble||(this.Scrabble={})).Player=function(){return function(d){var e,b,f;b=(null!=d?d:{}).name;d=[0,0];f=d[0];e=d[1];this.name=function(){return b};this.score=function(){return f};this.moveCount=function(){return e};this.move=function(c){var a;a=null!=c?c:{};c=a.board;a=a.swapCoordinates;if(null!=c||null!=a)return c=c.move(a),null!=c&&(e++,f+=c.scoreMove),c}}}()}).call(this);
(function(){var d,e,b,f=[].indexOf||function(c){for(var a=0,g=this.length;a<g;a++)if(a in this&&this[a]===c)return a;return-1};e=this.Scrabble||(this.Scrabble={});b={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10};d=e.Score=function(){return function(c){var a,g;g=c.grid;a=c.dictionary;this.printGrid=function(){return e.Util.printGrid(g)};this.matrix=function(){return e.Util.matrix(g)};this.moveScore=function(c){return d.moveScore({grid:g,
dictionary:a,swapCoordinates:c})};this.scoreWord=function(g){return 0<=f.call(a,g)?d.scoreWord(g):0};this.words=function(){return d.words({grid:g,dictionary:a})}}}();d.words=function(c){var a,g,b,h,l,n,d,m,p,r;g=c.grid;c=c.dictionary;a=[[],g.length];h=a[0];a=a[1];for(n=d=0;0<=a?d<a:d>a;n=0<=a?++d:--d)for(b=m=0;0<=a?m<a:m>a;b=0<=a?++m:--m)for(l=e.WordFinder.all({grid:g,dictionary:c,x:n,y:b,range:a}),p=0,r=l.length;p<r;p++)b=l[p],0>f.call(h,b)&&h.push(b);return h};d.move=function(c){var a,g,b,h,f,d;
g=c.grid;d=c.swapCoordinates;c=d.x1;f=d.y1;a=d.x2;d=d.y2;h=e.Util.sizeMatrix(g);b=e.Util.isValidSwapCoordinates({x1:c,y1:f,x2:a,y2:d,range:h});return null!=h&&b?(b=[g[f][c],g[d][a]],g[d][a]=b[0],g[f][c]=b[1],!0):!1};d.moveScore=function(c){var a,g,b;g=c.grid;a=c.dictionary;b=c.swapCoordinates;c=this.words({grid:g,dictionary:a});if(this.move({grid:g,swapCoordinates:b}))return a=this.words({grid:g,dictionary:a}),a=this.newWords({before:c,after:a}),{scoreMove:this.scoreWords(a),newWords:a}};d.scoreWord=
function(c){var a,g,k,h;k=g=0;for(h=c.length;k<h;k++)a=c[k],g+=b[a];return g};d.scoreWords=function(b){var a,g,k,h,f;a=[0,b.length];g=a[0];a=a[1];h=0;for(f=b.length;h<f;h++)k=b[h],g+=this.scoreWord(k);return g*a};d.newWords=function(b){var a,g,k,h,e;g=b.before;a=b.after;e=[];k=0;for(h=a.length;k<h;k++)b=a[k],0>f.call(g,b)&&e.push(b);return e}}).call(this);
(function(){var d,e,b,f,c=[].indexOf||function(a){for(var g=0,b=this.length;g<b;g++)if(g in this&&this[g]===a)return g;return-1};e=(this.Scrabble||(this.Scrabble={})).TileFinder=function(){return function(){}}();d=e.MIN_TILE_LENGTH=2;f=function(a,g){var b,c,f,e;c=a.range;f="";for(b=e=0;0<=c?e<c:e>c;b=0<=c?++e:--e)b=g(b),null!=b&&(f+=b);if(f.length===c)return f};b=function(a,g){var b,f,e,n,q,m;f=a.range;n=[];for(e=q=d;d<=f?q<=f:q>=f;e=d<=f?++q:--q)for(b=m=0;0<=e?m<e:m>e;b=0<=e?++m:--m)b=g(e,b),null==
b||0<=c.call(n,b)||n.push(b);return n};e.verticalOne=function(a){var b,c,e,d;c=a.grid;e=a.range;b=a.x;d=a.y;return f({grid:c,range:e,x:b,y:d},function(a){var f;return null!=(f=c[d+a])?f[b]:void 0})};e.horizontalOne=function(a){var b,c,e,d;c=a.grid;e=a.range;b=a.x;d=a.y;return f({grid:c,range:e,x:b,y:d},function(a){var f;return null!=(f=c[d])?f[b+a]:void 0})};e.diagonalOne_upperLeft_to_lowerRight=function(a){var b,c,e,d;c=a.grid;e=a.range;b=a.x;d=a.y;return f({grid:c,range:e,x:b,y:d},function(a){var f;
return null!=(f=c[d+a])?f[b+a]:void 0})};e.diagonalOne_lowerLeft_to_upperRight=function(a){var b,c,e,d;c=a.grid;e=a.range;b=a.x;d=a.y;return f({grid:c,range:e,x:b,y:d},function(a){var f;return null!=(f=c[d-a])?f[b+a]:void 0})};e.verticalTiles=function(a){var c,f,d,l;c=a.grid;f=a.range;d=a.x;l=a.y;return b({grid:c,range:f,x:d,y:l},function(a,b){return e.verticalOne({grid:c,x:d,y:l-b,range:a})})};e.horizontalTiles=function(a){var c,f,d,l;c=a.grid;f=a.range;d=a.x;l=a.y;return b({grid:c,range:f,x:d,y:l},
function(a,b){return e.horizontalOne({grid:c,x:d-b,y:l,range:a})})};e.diagonalTiles_upperLeft_to_lowerRight=function(a){var c,f,d,l;c=a.grid;f=a.range;d=a.x;l=a.y;return b({grid:c,range:f,x:d,y:l},function(a,b){return e.diagonalOne_upperLeft_to_lowerRight({grid:c,x:d-b,y:l-b,range:a})})};e.diagonalTiles_lowerLeft_to_upperRight=function(a){var c,f,d,l;c=a.grid;f=a.range;d=a.x;l=a.y;return b({grid:c,range:f,x:d,y:l},function(a,b){return e.diagonalOne_lowerLeft_to_upperRight({grid:c,x:d-b,y:l+b,range:a})})};
e.all=function(a){var b,f,e,d,n,q,m,p,r,t,s;f=a.grid;e=a.range;n=a.x;q=a.y;a=[];s=[this.verticalTiles,this.horizontalTiles,this.diagonalTiles_upperLeft_to_lowerRight,this.diagonalTiles_lowerLeft_to_upperRight];m=0;for(r=s.length;m<r;m++)for(b=s[m],d=b({grid:f,range:e,x:n,y:q}),p=0,t=d.length;p<t;p++)b=d[p],0>c.call(a,b)&&a.push(b);return a}}).call(this);
(function(){var d,e,b,f,c,a;d=(this.Scrabble||(this.Scrabble={})).Tile=function(){return function(){}}();c={A:9,B:2,C:2,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1};a=0;for(f in c)b=c[f],a+=b;e=function(){var a;a=[];for(f in c)a.push(f);return a}().sort();d.total=function(){return a};d.alphabet=function(){return e.slice(0)};d.randomLetter=function(){var b,d,h,l;b=Math.ceil(Math.random()*a);d=1;h=0;for(l=e.length;h<l;h++)if(f=e[h],d+=c[f],d>b)return f}}).call(this);
(function(){var d,e;d=this.Scrabble||(this.Scrabble={});e=d.Util=function(){return function(){}}();e.isInteger=function(b){return b===Math.round(b)};e.inRange=function(b){var f,c,a;c=b.value;f=b.range;a=b.x;b=b.y;if(null!=c)return this.isInteger(c)&&0<=c&&c<f;if(null!=a&&null!=b)return this.inRange({value:a,range:f})&&this.inRange({value:b,range:f})};e.setCoordinate=function(b){var f,c,a,d;f=b.coordinates;c=b.range;a=b.x;d=b.y;b=b.value;f[a]||(f[a]=[]);this.inRange({value:a,range:c})&&this.inRange({value:d,
range:c})?f[a][d]=b:f[a][d]=void 0;return!!f[a][d]};e.getCoordinate=function(b){return b.coordinates[b.x][b.y]};e.generateGrid=function(b){var f,c;c=[];for(f=0;0<=b?f<b:f>b;0<=b?++f:--f)c.push(function(){var a,c;c=[];for(a=0;0<=b?a<b:a>b;0<=b?++a:--a)c.push(d.Tile.randomLetter());return c}());return c};e.printGrid=function(b){var f;f=this.matrix(b);var c,a,d;d=[];c=0;for(a=f.length;c<a;c++)b=f[c],d.push(" "+b.join(" | "));return d.join("\n")};e.matrix=function(b){var f,c,a,d,e;e=[];f=a=0;for(d=b.length;0<=
d?a<d:a>d;f=0<=d?++a:--a)e.push(function(){var a,d,e;e=[];c=a=0;for(d=b[f].length;0<=d?a<d:a>d;c=0<=d?++a:--a)e.push(b[f][c]);return e}());return e};e.wordList=function(b){var f,c,a,e,k,h;f=b.size;c=b.words;h=[];a=0;for(e=c.length;a<e;a++)b=c[a],d.TileFinder.MIN_TILE_LENGTH<=(k=b.length)&&k<=f&&h.push(b);return h};e.isMatrixQuadratic=function(b){var d,c,a;if(!b)return!1;c=0;for(a=b.length;c<a;c++)if(d=b[c],b.length!==d.length)return!1;return!0};e.sizeMatrix=function(b){if(this.isMatrixQuadratic(b))return b.length};
e.isValidSwapCoordinates=function(b){var d,c,a,e,k,h;a=b.x1;k=b.y1;e=b.x2;h=b.y2;b=b.range;d=1===Math.abs(e-a);c=1===Math.abs(h-k);return(d=d&&c?!1:d||c)&&null!=b?this.inRange({x:a,y:k,range:b})&&this.inRange({x:e,y:h,range:b}):d}}).call(this);
(function(){var d,e,b=[].indexOf||function(b){for(var c=0,a=this.length;c<a;c++)if(c in this&&this[c]===b)return c;return-1};d=this.Scrabble||(this.Scrabble={});e=d.WordFinder=function(){return function(){}}();e.isWord=function(d){return 0<=b.call(d.dictionary,d.word)};e.all=function(b){var c,a,e,k,h;a=b.grid;c=b.dictionary;b=d.TileFinder.all({grid:a,dictionary:c,range:b.range,x:b.x,y:b.y});h=[];e=0;for(k=b.length;e<k;e++)a=b[e],this.isWord({word:a,dictionary:c})&&h.push(a);return h}}).call(this);
