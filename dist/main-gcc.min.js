(function(){var g,e;e=this.Scrabble||(this.Scrabble={});g=e.Board=function(){function b(b){var c,a,d,h,k;d=b.size;k=b.words;c=b.grid;e.Util.isMatrixQuadratic(c)?d=e.Util.sizeMatrix(c):c=void 0;if(!g.isValidSize(d))throw"Grid size not given";c||(c=e.Util.generateGrid(d));h=e.Util.wordList({size:d,words:k});a=new e.Score({grid:c,dictionary:k});this.size=function(){return d};this.isWord=function(a){return e.WordFinder.isWord({word:a,dictionary:h})};this.move=function(d){return a.moveScore(d)};this.str=
function(){return e.Util.printGrid(c)};this.matrix=function(){return e.Util.matrix(c)};this.set=function(a){return e.Util.setCoordinate({coordinates:c,range:d,x:a.x,y:a.y,value:a.value})};this.get=function(a){return e.Util.getCoordinate({coordinates:c,x:a.x,y:a.y})}}b.prototype.inRange=function(b){return e.Util.inRange({value:b,range:this.size()})};return b}();g.isValidSize=function(b){return!b||0>b?!1:!0}}).call(this);
(function(){var g,e,b,f=[].indexOf||function(c){for(var a=0,d=this.length;a<d;a++)if(a in this&&this[a]===c)return a;return-1};e=this.Scrabble||(this.Scrabble={});b={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10};g=e.Score=function(){return function(c){var a,d;d=c.grid;a=c.dictionary;this.printGrid=function(){return e.Util.printGrid(d)};this.matrix=function(){return e.Util.matrix(d)};this.moveScore=function(h){return g.moveScore({grid:d,
dictionary:a,swapCoordinates:h})};this.scoreWord=function(d){return 0<=f.call(a,d)?g.scoreWord(d):0};this.words=function(){return g.words({grid:d,dictionary:a})}}}();g.words=function(c){var a,d,h,k,b,l,m,g,q,r;d=c.grid;c=c.dictionary;a=[[],d.length];k=a[0];a=a[1];for(l=m=0;0<=a?m<a:m>a;l=0<=a?++m:--m)for(h=g=0;0<=a?g<a:g>a;h=0<=a?++g:--g)for(b=e.WordFinder.all({grid:d,dictionary:c,x:l,y:h,range:a}),q=0,r=b.length;q<r;q++)h=b[q],0>f.call(k,h)&&k.push(h);return k};g.move=function(c){var a,d,h,b,f,l;
d=c.grid;l=c.swapCoordinates;c=l.x1;f=l.y1;a=l.x2;l=l.y2;b=e.Util.sizeMatrix(d);h=e.Util.isValidSwapCoordinates({x1:c,y1:f,x2:a,y2:l,range:b});return null!=b&&h?(h=[d[f][c],d[l][a]],d[l][a]=h[0],d[f][c]=h[1],!0):!1};g.moveScore=function(c){var a,d,h;d=c.grid;a=c.dictionary;h=c.swapCoordinates;c=this.words({grid:d,dictionary:a});if(this.move({grid:d,swapCoordinates:h}))return a=this.words({grid:d,dictionary:a}),a=this.newWords({before:c,after:a}),{scoreMove:this.scoreWords(a),newWords:a}};g.scoreWord=
function(c){var a,d,h,k;h=d=0;for(k=c.length;h<k;h++)a=c[h],d+=b[a];return d};g.scoreWords=function(c){var a,d,h,b,f;a=[0,c.length];d=a[0];a=a[1];b=0;for(f=c.length;b<f;b++)h=c[b],d+=this.scoreWord(h);return d*a};g.newWords=function(b){var a,d,h,k,n;d=b.before;a=b.after;n=[];h=0;for(k=a.length;h<k;h++)b=a[h],0>f.call(d,b)&&n.push(b);return n}}).call(this);
(function(){var g,e,b,f,c=[].indexOf||function(a){for(var d=0,b=this.length;d<b;d++)if(d in this&&this[d]===a)return d;return-1};e=(this.Scrabble||(this.Scrabble={})).TileFinder=function(){return function(){}}();g=e.MIN_TILE_LENGTH=2;f=function(a,d){var b,c,f,e;c=a.range;f="";for(b=e=0;0<=c?e<c:e>c;b=0<=c?++e:--e)b=d(b),null!=b&&(f+=b);if(f.length===c)return f};b=function(a,d){var b,f,e,l,m,p;f=a.range;l=[];for(e=m=g;g<=f?m<=f:m>=f;e=g<=f?++m:--m)for(b=p=0;0<=e?p<e:p>e;b=0<=e?++p:--p)b=d(e,b),null==
b||0<=c.call(l,b)||l.push(b);return l};e.verticalOne=function(a){var d,b,c,e;b=a.grid;c=a.range;d=a.x;e=a.y;return f({grid:b,range:c,x:d,y:e},function(a){var c;return null!=(c=b[e+a])?c[d]:void 0})};e.horizontalOne=function(a){var d,b,c,e;b=a.grid;c=a.range;d=a.x;e=a.y;return f({grid:b,range:c,x:d,y:e},function(a){var c;return null!=(c=b[e])?c[d+a]:void 0})};e.diagonalOne_upperLeft_to_lowerRight=function(a){var d,b,c,e;b=a.grid;c=a.range;d=a.x;e=a.y;return f({grid:b,range:c,x:d,y:e},function(a){var c;
return null!=(c=b[e+a])?c[d+a]:void 0})};e.diagonalOne_lowerLeft_to_upperRight=function(a){var b,c,e,g;c=a.grid;e=a.range;b=a.x;g=a.y;return f({grid:c,range:e,x:b,y:g},function(a){var f;return null!=(f=c[g-a])?f[b+a]:void 0})};e.verticalTiles=function(a){var d,c,f,g;d=a.grid;c=a.range;f=a.x;g=a.y;return b({grid:d,range:c,x:f,y:g},function(a,b){return e.verticalOne({grid:d,x:f,y:g-b,range:a})})};e.horizontalTiles=function(a){var d,c,f,g;d=a.grid;c=a.range;f=a.x;g=a.y;return b({grid:d,range:c,x:f,y:g},
function(a,b){return e.horizontalOne({grid:d,x:f-b,y:g,range:a})})};e.diagonalTiles_upperLeft_to_lowerRight=function(a){var d,c,f,g;d=a.grid;c=a.range;f=a.x;g=a.y;return b({grid:d,range:c,x:f,y:g},function(a,b){return e.diagonalOne_upperLeft_to_lowerRight({grid:d,x:f-b,y:g-b,range:a})})};e.diagonalTiles_lowerLeft_to_upperRight=function(a){var c,f,g,n;c=a.grid;f=a.range;g=a.x;n=a.y;return b({grid:c,range:f,x:g,y:n},function(a,b){return e.diagonalOne_lowerLeft_to_upperRight({grid:c,x:g-b,y:n+b,range:a})})};
e.all=function(a){var b,f,e,g,l,m,p,q,r,t,s;f=a.grid;e=a.range;l=a.x;m=a.y;a=[];s=[this.verticalTiles,this.horizontalTiles,this.diagonalTiles_upperLeft_to_lowerRight,this.diagonalTiles_lowerLeft_to_upperRight];p=0;for(r=s.length;p<r;p++)for(b=s[p],g=b({grid:f,range:e,x:l,y:m}),q=0,t=g.length;q<t;q++)b=g[q],0>c.call(a,b)&&a.push(b);return a}}).call(this);
(function(){var g,e,b,f,c,a;g=(this.Scrabble||(this.Scrabble={})).Tile=function(){return function(){}}();c={A:9,B:2,C:2,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1};a=0;for(f in c)b=c[f],a+=b;e=function(){var a;a=[];for(f in c)a.push(f);return a}().sort();g.total=function(){return a};g.alphabet=function(){return e.slice(0)};g.randomLetter=function(){var b,g,k,n;b=Math.ceil(Math.random()*a);g=1;k=0;for(n=e.length;k<n;k++)if(f=e[k],g+=c[f],g>b)return f}}).call(this);
(function(){var g,e;g=this.Scrabble||(this.Scrabble={});e=g.Util=function(){return function(){}}();e.isInteger=function(b){return b===Math.round(b)};e.inRange=function(b){var f,c,a;c=b.value;f=b.range;a=b.x;b=b.y;if(null!=c)return this.isInteger(c)&&0<=c&&c<f;if(null!=a&&null!=b)return this.inRange({value:a,range:f})&&this.inRange({value:b,range:f})};e.setCoordinate=function(b){var f,c,a,d;f=b.coordinates;c=b.range;a=b.x;d=b.y;b=b.value;f[a]||(f[a]=[]);this.inRange({value:a,range:c})&&this.inRange({value:d,
range:c})?f[a][d]=b:f[a][d]=void 0;return!!f[a][d]};e.getCoordinate=function(b){return b.coordinates[b.x][b.y]};e.generateGrid=function(b){var f,c;c=[];for(f=0;0<=b?f<b:f>b;0<=b?++f:--f)c.push(function(){var a,c;c=[];for(a=0;0<=b?a<b:a>b;0<=b?++a:--a)c.push(g.Tile.randomLetter());return c}());return c};e.printGrid=function(b){var f;f=this.matrix(b);var c,a,d;d=[];c=0;for(a=f.length;c<a;c++)b=f[c],d.push(" "+b.join(" | "));return d.join("\n")};e.matrix=function(b){var f,c,a,d,e;e=[];f=a=0;for(d=b.length;0<=
d?a<d:a>d;f=0<=d?++a:--a)e.push(function(){var a,d,e;e=[];c=a=0;for(d=b[f].length;0<=d?a<d:a>d;c=0<=d?++a:--a)e.push(b[f][c]);return e}());return e};e.wordList=function(b){var f,c,a,d,e,k;f=b.size;c=b.words;k=[];a=0;for(d=c.length;a<d;a++)b=c[a],g.TileFinder.MIN_TILE_LENGTH<=(e=b.length)&&e<=f&&k.push(b);return k};e.isMatrixQuadratic=function(b){var f,c,a;if(!b)return!1;c=0;for(a=b.length;c<a;c++)if(f=b[c],b.length!==f.length)return!1;return!0};e.sizeMatrix=function(b){if(this.isMatrixQuadratic(b))return b.length};
e.isValidSwapCoordinates=function(b){var f,c,a,d,e,g;a=b.x1;e=b.y1;d=b.x2;g=b.y2;b=b.range;f=1===Math.abs(d-a);c=1===Math.abs(g-e);return(f=f&&c?!1:f||c)&&null!=b?this.inRange({x:a,y:e,range:b})&&this.inRange({x:d,y:g,range:b}):f}}).call(this);
(function(){var g,e,b=[].indexOf||function(b){for(var c=0,a=this.length;c<a;c++)if(c in this&&this[c]===b)return c;return-1};g=this.Scrabble||(this.Scrabble={});e=g.WordFinder=function(){return function(){}}();e.isWord=function(f){return 0<=b.call(f.dictionary,f.word)};e.all=function(b){var c,a,d,e,k;a=b.grid;c=b.dictionary;b=g.TileFinder.all({grid:a,dictionary:c,range:b.range,x:b.x,y:b.y});k=[];d=0;for(e=b.length;d<e;d++)a=b[d],this.isWord({word:a,dictionary:c})&&k.push(a);return k}}).call(this);
