(function(){var f,d;d=this.Scrabble||(this.Scrabble={});f=d.Board=function(){function c(e){var b,a,g,h,l;g=e.size;l=e.words;b=e.grid;d.Util.isMatrixQuadratic(b)?g=d.Util.sizeMatrix(b):b=void 0;if(!f.isValidSize(g))throw Error("Grid size not given");b||(b=d.Util.generateGrid(g));h=d.Util.wordList({size:g,words:l});a=new d.Score({grid:b,dictionary:l});this.size=function(){return g};this.isWord=function(a){return d.WordFinder.isWord({word:a,dictionary:h})};this.move=function(g){return a.moveScore(g)};
this.str=function(){return d.Util.printGrid(b)};this.matrix=function(){return d.Util.matrix(b)};this.set=function(a){return d.Util.setCoordinate({coordinates:b,range:g,x:a.x,y:a.y,value:a.value})};this.get=function(a){return d.Util.getCoordinate({coordinates:b,x:a.x,y:a.y})}}c.prototype.inRange=function(e){return d.Util.inRange({value:e,range:this.size()})};return c}();f.isValidSize=function(c){return!c||0>c?!1:!0}}).call(this);
(function(){var f,d,c;c=this.Scrabble||(this.Scrabble={});f={PLAYER:{ONE:{SCORE:"p1score",NAME:"p1name"},TWO:{SCORE:"p2score",NAME:"p2name"}},MESSAGE:"message",GRID:"grid"};d=c.Game=function(){function e(b){this.words=(null!=b?b:{}).words;if(null==this.words)throw Error("Board or words was not given");}e.prototype["new"]=function(b){var a,g,h,e,k;a=null!=b?b:{};k=a.size;h=a.player1;e=a.player2;g=a.board;b=a.DOM;a=a.VIEW;this.board=g||new c.Board({size:k||5,words:this.words});this.currentPlayer=this.player1=
h||new c.Player({name:"Player 1"});this.player2=e||new c.Player({name:"Player 2"});a||(a=f);this.view=new d.View({p1score:a.PLAYER.ONE.SCORE,p2score:a.PLAYER.TWO.SCORE,p1name:a.PLAYER.ONE.NAME,p2name:a.PLAYER.TWO.NAME,grid:a.GRID,context:b,game:this});this.view.updateScore();this.view.updatePlayerNames();this.view.updateGrid();return this};return e}();d.View=function(){function e(b){var a,g,h,e,c,d;d=null!=b?b:{};h=d.p1score;c=d.p2score;g=d.p1name;e=d.p2name;b=d.context;a=d.grid;this.game=d.game;
this.$p1name=$("#"+g,b);this.$p1score=$("#"+h,b);this.$p2name=$("#"+e,b);this.$p2score=$("#"+c,b);this.$grid=$("#"+a,b)}e.prototype.updateScore=function(){this.$p1score.html(0);return this.$p2score.html(0)};e.prototype.updatePlayerNames=function(){this.$p1name.html(this.game.player1.name());return this.$p2name.html(this.game.player2.name())};e.prototype.updateGrid=function(){return this.$grid.empty().append(d.View.createGrid(this.game.board.matrix()))};return e}();d.View.showMessage=function(e){var b;
b=null!=e?e:{};e=b.message;return $("#"+(b.id||f.MESSAGE),b.context).html(e)};d.View.createGridLine=function(e){var b,a,g,h;b="";g=0;for(h=e.length;g<h;g++)a=e[g],b+="<li>"+a+"</li>";return $(b)};d.View.createGrid=function(e){var b,a,g,h,c;b=$("<div>");h=0;for(c=e.length;h<c;h++)a=e[h],g=$("<ul>"),b.append(g.append(this.createGridLine(a)));return b.contents()}}).call(this);
(function(){(this.Scrabble||(this.Scrabble={})).Player=function(){return function(f){var d,c,e;c=(null!=f?f:{}).name;f=[0,0];e=f[0];d=f[1];this.name=function(){return c};this.score=function(){return e};this.moveCount=function(){return d};this.move=function(b){var a;a=null!=b?b:{};b=a.board;a=a.swapCoordinates;if(null!=b||null!=a)return b=b.move(a),null!=b&&(d++,e+=b.scoreMove),b}}}()}).call(this);
(function(){var f,d,c,e=[].indexOf||function(b){for(var a=0,g=this.length;a<g;a++)if(a in this&&this[a]===b)return a;return-1};d=this.Scrabble||(this.Scrabble={});c={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10};f=d.Score=function(){return function(b){var a,g;g=b.grid;a=b.dictionary;this.printGrid=function(){return d.Util.printGrid(g)};this.matrix=function(){return d.Util.matrix(g)};this.moveScore=function(b){return f.moveScore({grid:g,
dictionary:a,swapCoordinates:b})};this.scoreWord=function(g){return 0<=e.call(a,g)?f.scoreWord(g):0};this.words=function(){return f.words({grid:g,dictionary:a})}}}();f.words=function(b){var a,g,h,c,k,n,f,m,p,r;g=b.grid;b=b.dictionary;a=[[],g.length];c=a[0];a=a[1];for(n=f=0;0<=a?f<a:f>a;n=0<=a?++f:--f)for(h=m=0;0<=a?m<a:m>a;h=0<=a?++m:--m)for(k=d.WordFinder.all({grid:g,dictionary:b,x:n,y:h,range:a}),p=0,r=k.length;p<r;p++)h=k[p],0>e.call(c,h)&&c.push(h);return c};f.move=function(b){var a,g,h,e,c,f;
g=b.grid;f=b.swapCoordinates;b=f.x1;c=f.y1;a=f.x2;f=f.y2;e=d.Util.sizeMatrix(g);h=d.Util.isValidSwapCoordinates({x1:b,y1:c,x2:a,y2:f,range:e});return null!=e&&h?(h=[g[c][b],g[f][a]],g[f][a]=h[0],g[c][b]=h[1],!0):!1};f.moveScore=function(b){var a,g,h;g=b.grid;a=b.dictionary;h=b.swapCoordinates;b=this.words({grid:g,dictionary:a});if(this.move({grid:g,swapCoordinates:h}))return a=this.words({grid:g,dictionary:a}),a=this.newWords({before:b,after:a}),{scoreMove:this.scoreWords(a),newWords:a}};f.scoreWord=
function(b){var a,g,h,e;h=g=0;for(e=b.length;h<e;h++)a=b[h],g+=c[a];return g};f.scoreWords=function(b){var a,g,e,c,d;a=[0,b.length];g=a[0];a=a[1];c=0;for(d=b.length;c<d;c++)e=b[c],g+=this.scoreWord(e);return g*a};f.newWords=function(b){var a,g,c,d,k;g=b.before;a=b.after;k=[];c=0;for(d=a.length;c<d;c++)b=a[c],0>e.call(g,b)&&k.push(b);return k}}).call(this);
(function(){var f,d,c,e,b=[].indexOf||function(a){for(var g=0,b=this.length;g<b;g++)if(g in this&&this[g]===a)return g;return-1};d=(this.Scrabble||(this.Scrabble={})).TileFinder=function(){return function(){}}();f=d.MIN_TILE_LENGTH=2;e=function(a,g){var b,c,e,d;c=a.range;e="";for(b=d=0;0<=c?d<c:d>c;b=0<=c?++d:--d)b=g(b),null!=b&&(e+=b);if(e.length===c)return e};c=function(a,g){var c,e,d,n,q,m;e=a.range;n=[];for(d=q=f;f<=e?q<=e:q>=e;d=f<=e?++q:--q)for(c=m=0;0<=d?m<d:m>d;c=0<=d?++m:--m)c=g(d,c),null==
c||0<=b.call(n,c)||n.push(c);return n};d.verticalOne=function(a){var b,c,d,f;c=a.grid;d=a.range;b=a.x;f=a.y;return e({grid:c,range:d,x:b,y:f},function(a){var e;return null!=(e=c[f+a])?e[b]:void 0})};d.horizontalOne=function(a){var b,c,d,f;c=a.grid;d=a.range;b=a.x;f=a.y;return e({grid:c,range:d,x:b,y:f},function(a){var e;return null!=(e=c[f])?e[b+a]:void 0})};d.diagonalOne_upperLeft_to_lowerRight=function(a){var b,c,d,f;c=a.grid;d=a.range;b=a.x;f=a.y;return e({grid:c,range:d,x:b,y:f},function(a){var e;
return null!=(e=c[f+a])?e[b+a]:void 0})};d.diagonalOne_lowerLeft_to_upperRight=function(a){var b,c,d,f;c=a.grid;d=a.range;b=a.x;f=a.y;return e({grid:c,range:d,x:b,y:f},function(a){var e;return null!=(e=c[f-a])?e[b+a]:void 0})};d.verticalTiles=function(a){var b,e,f,k;b=a.grid;e=a.range;f=a.x;k=a.y;return c({grid:b,range:e,x:f,y:k},function(a,c){return d.verticalOne({grid:b,x:f,y:k-c,range:a})})};d.horizontalTiles=function(a){var b,e,f,k;b=a.grid;e=a.range;f=a.x;k=a.y;return c({grid:b,range:e,x:f,y:k},
function(a,c){return d.horizontalOne({grid:b,x:f-c,y:k,range:a})})};d.diagonalTiles_upperLeft_to_lowerRight=function(a){var b,e,f,k;b=a.grid;e=a.range;f=a.x;k=a.y;return c({grid:b,range:e,x:f,y:k},function(a,c){return d.diagonalOne_upperLeft_to_lowerRight({grid:b,x:f-c,y:k-c,range:a})})};d.diagonalTiles_lowerLeft_to_upperRight=function(a){var b,e,f,k;b=a.grid;e=a.range;f=a.x;k=a.y;return c({grid:b,range:e,x:f,y:k},function(a,c){return d.diagonalOne_lowerLeft_to_upperRight({grid:b,x:f-c,y:k+c,range:a})})};
d.all=function(a){var c,e,d,f,n,q,m,p,r,t,s;e=a.grid;d=a.range;n=a.x;q=a.y;a=[];s=[this.verticalTiles,this.horizontalTiles,this.diagonalTiles_upperLeft_to_lowerRight,this.diagonalTiles_lowerLeft_to_upperRight];m=0;for(r=s.length;m<r;m++)for(c=s[m],f=c({grid:e,range:d,x:n,y:q}),p=0,t=f.length;p<t;p++)c=f[p],0>b.call(a,c)&&a.push(c);return a}}).call(this);
(function(){var f,d,c,e,b,a;f=(this.Scrabble||(this.Scrabble={})).Tile=function(){return function(){}}();b={A:9,B:2,C:2,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1};a=0;for(e in b)c=b[e],a+=c;d=function(){var a;a=[];for(e in b)a.push(e);return a}().sort();f.total=function(){return a};f.alphabet=function(){return d.slice(0)};f.randomLetter=function(){var c,f,l,k;c=Math.ceil(Math.random()*a);f=1;l=0;for(k=d.length;l<k;l++)if(e=d[l],f+=b[e],f>c)return e}}).call(this);
(function(){var f,d;f=this.Scrabble||(this.Scrabble={});d=f.Util=function(){return function(){}}();d.isInteger=function(c){return c===Math.round(c)};d.inRange=function(c){var e,b,a;b=c.value;e=c.range;a=c.x;c=c.y;if(null!=b)return this.isInteger(b)&&0<=b&&b<e;if(null!=a&&null!=c)return this.inRange({value:a,range:e})&&this.inRange({value:c,range:e})};d.setCoordinate=function(c){var e,b,a,d;e=c.coordinates;b=c.range;a=c.x;d=c.y;c=c.value;e[a]||(e[a]=[]);this.inRange({value:a,range:b})&&this.inRange({value:d,
range:b})?e[a][d]=c:e[a][d]=void 0;return!!e[a][d]};d.getCoordinate=function(c){return c.coordinates[c.x][c.y]};d.generateGrid=function(c){var e,b;b=[];for(e=0;0<=c?e<c:e>c;0<=c?++e:--e)b.push(function(){var a,b;b=[];for(a=0;0<=c?a<c:a>c;0<=c?++a:--a)b.push(f.Tile.randomLetter());return b}());return b};d.printGrid=function(c){var e;e=this.matrix(c);var b,a,d;d=[];b=0;for(a=e.length;b<a;b++)c=e[b],d.push(" "+c.join(" | "));return d.join("\n")};d.matrix=function(c){var e,b,a,d,f;f=[];e=a=0;for(d=c.length;0<=
d?a<d:a>d;e=0<=d?++a:--a)f.push(function(){var a,d,f;f=[];b=a=0;for(d=c[e].length;0<=d?a<d:a>d;b=0<=d?++a:--a)f.push(c[e][b]);return f}());return f};d.wordList=function(c){var e,b,a,d,h,l;e=c.size;b=c.words;l=[];a=0;for(d=b.length;a<d;a++)c=b[a],f.TileFinder.MIN_TILE_LENGTH<=(h=c.length)&&h<=e&&l.push(c);return l};d.isMatrixQuadratic=function(c){var e,b,a;if(!c)return!1;b=0;for(a=c.length;b<a;b++)if(e=c[b],c.length!==e.length)return!1;return!0};d.sizeMatrix=function(c){if(this.isMatrixQuadratic(c))return c.length};
d.isValidSwapCoordinates=function(c){var e,b,a,d,f,l;a=c.x1;f=c.y1;d=c.x2;l=c.y2;c=c.range;e=1===Math.abs(d-a);b=1===Math.abs(l-f);return(e=e&&b?!1:e||b)&&null!=c?this.inRange({x:a,y:f,range:c})&&this.inRange({x:d,y:l,range:c}):e}}).call(this);
(function(){var f,d,c=[].indexOf||function(c){for(var b=0,a=this.length;b<a;b++)if(b in this&&this[b]===c)return b;return-1};f=this.Scrabble||(this.Scrabble={});d=f.WordFinder=function(){return function(){}}();d.isWord=function(e){return 0<=c.call(e.dictionary,e.word)};d.all=function(c){var b,a,d,h,l;a=c.grid;b=c.dictionary;c=f.TileFinder.all({grid:a,dictionary:b,range:c.range,x:c.x,y:c.y});l=[];d=0;for(h=c.length;d<h;d++)a=c[d],this.isWord({word:a,dictionary:b})&&l.push(a);return l}}).call(this);
