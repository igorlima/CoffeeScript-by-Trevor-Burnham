(function(){var g,d;d=this.Scrabble||(this.Scrabble={});g=d.Board=function(){function b(b){var c,a,f,k,h;f=b.size;h=b.words;c=b.grid;d.Util.isMatrixQuadratic(c)?f=d.Util.sizeMatrix(c):c=void 0;if(!g.isValidSize(f))throw"Grid size not given";c||(c=d.Util.generateGrid(f));k=d.Util.wordList({size:f,words:h});a=new d.Score({grid:c,dictionary:h});this.size=function(){return f};this.isWord=function(a){return d.WordFinder.isWord({word:a,dictionary:k})};this.move=function(f){return a.moveScore(f)};this.str=
function(){return d.Util.printGrid(c)};this.matrix=function(){return d.Util.matrix(c)};this.set=function(a){return d.Util.setCoordinate({coordinates:c,range:f,x:a.x,y:a.y,value:a.value})};this.get=function(a){return d.Util.getCoordinate({coordinates:c,x:a.x,y:a.y})}}b.prototype.inRange=function(b){return d.Util.inRange({value:b,range:this.size()})};return b}();g.isValidSize=function(b){return!b||0>b?!1:!0}}).call(this);
(function(){(this.Scrabble||(this.Scrabble={})).Player=function(){return function(g){var d,b,e;b=(null!=g?g:{}).name;g=[0,0];e=g[0];d=g[1];this.name=function(){return b};this.score=function(){return e};this.moveCount=function(){return d};this.move=function(c){var a;a=null!=c?c:{};c=a.board;a=a.swapCoordinates;if(null!=c||null!=a)return c=c.move(a),null!=c&&(d++,e+=c.scoreMove),c}}}()}).call(this);
(function(){var g,d,b,e=[].indexOf||function(c){for(var a=0,f=this.length;a<f;a++)if(a in this&&this[a]===c)return a;return-1};d=this.Scrabble||(this.Scrabble={});b={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10};g=d.Score=function(){return function(c){var a,f;f=c.grid;a=c.dictionary;this.printGrid=function(){return d.Util.printGrid(f)};this.matrix=function(){return d.Util.matrix(f)};this.moveScore=function(c){return g.moveScore({grid:f,
dictionary:a,swapCoordinates:c})};this.scoreWord=function(f){return 0<=e.call(a,f)?g.scoreWord(f):0};this.words=function(){return g.words({grid:f,dictionary:a})}}}();g.words=function(c){var a,f,k,b,m,l,g,n,p,r;f=c.grid;c=c.dictionary;a=[[],f.length];b=a[0];a=a[1];for(l=g=0;0<=a?g<a:g>a;l=0<=a?++g:--g)for(k=n=0;0<=a?n<a:n>a;k=0<=a?++n:--n)for(m=d.WordFinder.all({grid:f,dictionary:c,x:l,y:k,range:a}),p=0,r=m.length;p<r;p++)k=m[p],0>e.call(b,k)&&b.push(k);return b};g.move=function(c){var a,f,k,b,e,l;
f=c.grid;l=c.swapCoordinates;c=l.x1;e=l.y1;a=l.x2;l=l.y2;b=d.Util.sizeMatrix(f);k=d.Util.isValidSwapCoordinates({x1:c,y1:e,x2:a,y2:l,range:b});return null!=b&&k?(k=[f[e][c],f[l][a]],f[l][a]=k[0],f[e][c]=k[1],!0):!1};g.moveScore=function(c){var a,f,b;f=c.grid;a=c.dictionary;b=c.swapCoordinates;c=this.words({grid:f,dictionary:a});if(this.move({grid:f,swapCoordinates:b}))return a=this.words({grid:f,dictionary:a}),a=this.newWords({before:c,after:a}),{scoreMove:this.scoreWords(a),newWords:a}};g.scoreWord=
function(c){var a,f,k,h;k=f=0;for(h=c.length;k<h;k++)a=c[k],f+=b[a];return f};g.scoreWords=function(c){var a,f,b,h,e;a=[0,c.length];f=a[0];a=a[1];h=0;for(e=c.length;h<e;h++)b=c[h],f+=this.scoreWord(b);return f*a};g.newWords=function(c){var a,f,b,h,m;f=c.before;a=c.after;m=[];b=0;for(h=a.length;b<h;b++)c=a[b],0>e.call(f,c)&&m.push(c);return m}}).call(this);
(function(){var g,d,b,e,c=[].indexOf||function(a){for(var f=0,c=this.length;f<c;f++)if(f in this&&this[f]===a)return f;return-1};d=(this.Scrabble||(this.Scrabble={})).TileFinder=function(){return function(){}}();g=d.MIN_TILE_LENGTH=2;e=function(a,f){var c,b,e,d;b=a.range;e="";for(c=d=0;0<=b?d<b:d>b;c=0<=b?++d:--d)c=f(c),null!=c&&(e+=c);if(e.length===b)return e};b=function(a,f){var b,e,d,l,q,n;e=a.range;l=[];for(d=q=g;g<=e?q<=e:q>=e;d=g<=e?++q:--q)for(b=n=0;0<=d?n<d:n>d;b=0<=d?++n:--n)b=f(d,b),null==
b||0<=c.call(l,b)||l.push(b);return l};d.verticalOne=function(a){var f,b,c,d;b=a.grid;c=a.range;f=a.x;d=a.y;return e({grid:b,range:c,x:f,y:d},function(a){var c;return null!=(c=b[d+a])?c[f]:void 0})};d.horizontalOne=function(a){var f,b,c,d;b=a.grid;c=a.range;f=a.x;d=a.y;return e({grid:b,range:c,x:f,y:d},function(a){var c;return null!=(c=b[d])?c[f+a]:void 0})};d.diagonalOne_upperLeft_to_lowerRight=function(a){var f,b,c,d;b=a.grid;c=a.range;f=a.x;d=a.y;return e({grid:b,range:c,x:f,y:d},function(a){var c;
return null!=(c=b[d+a])?c[f+a]:void 0})};d.diagonalOne_lowerLeft_to_upperRight=function(a){var c,b,d,g;b=a.grid;d=a.range;c=a.x;g=a.y;return e({grid:b,range:d,x:c,y:g},function(a){var e;return null!=(e=b[g-a])?e[c+a]:void 0})};d.verticalTiles=function(a){var c,e,h,g;c=a.grid;e=a.range;h=a.x;g=a.y;return b({grid:c,range:e,x:h,y:g},function(a,b){return d.verticalOne({grid:c,x:h,y:g-b,range:a})})};d.horizontalTiles=function(a){var c,e,h,g;c=a.grid;e=a.range;h=a.x;g=a.y;return b({grid:c,range:e,x:h,y:g},
function(a,b){return d.horizontalOne({grid:c,x:h-b,y:g,range:a})})};d.diagonalTiles_upperLeft_to_lowerRight=function(a){var c,e,g,m;c=a.grid;e=a.range;g=a.x;m=a.y;return b({grid:c,range:e,x:g,y:m},function(a,b){return d.diagonalOne_upperLeft_to_lowerRight({grid:c,x:g-b,y:m-b,range:a})})};d.diagonalTiles_lowerLeft_to_upperRight=function(a){var c,e,g,m;c=a.grid;e=a.range;g=a.x;m=a.y;return b({grid:c,range:e,x:g,y:m},function(a,b){return d.diagonalOne_lowerLeft_to_upperRight({grid:c,x:g-b,y:m+b,range:a})})};
d.all=function(a){var b,e,d,g,l,q,n,p,r,t,s;e=a.grid;d=a.range;l=a.x;q=a.y;a=[];s=[this.verticalTiles,this.horizontalTiles,this.diagonalTiles_upperLeft_to_lowerRight,this.diagonalTiles_lowerLeft_to_upperRight];n=0;for(r=s.length;n<r;n++)for(b=s[n],g=b({grid:e,range:d,x:l,y:q}),p=0,t=g.length;p<t;p++)b=g[p],0>c.call(a,b)&&a.push(b);return a}}).call(this);
(function(){var g,d,b,e,c,a;g=(this.Scrabble||(this.Scrabble={})).Tile=function(){return function(){}}();c={A:9,B:2,C:2,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1};a=0;for(e in c)b=c[e],a+=b;d=function(){var a;a=[];for(e in c)a.push(e);return a}().sort();g.total=function(){return a};g.alphabet=function(){return d.slice(0)};g.randomLetter=function(){var b,g,h,m;b=Math.ceil(Math.random()*a);g=1;h=0;for(m=d.length;h<m;h++)if(e=d[h],g+=c[e],g>b)return e}}).call(this);
(function(){var g,d;g=this.Scrabble||(this.Scrabble={});d=g.Util=function(){return function(){}}();d.isInteger=function(b){return b===Math.round(b)};d.inRange=function(b){var e,c,a;c=b.value;e=b.range;a=b.x;b=b.y;if(null!=c)return this.isInteger(c)&&0<=c&&c<e;if(null!=a&&null!=b)return this.inRange({value:a,range:e})&&this.inRange({value:b,range:e})};d.setCoordinate=function(b){var e,c,a,f;e=b.coordinates;c=b.range;a=b.x;f=b.y;b=b.value;e[a]||(e[a]=[]);this.inRange({value:a,range:c})&&this.inRange({value:f,
range:c})?e[a][f]=b:e[a][f]=void 0;return!!e[a][f]};d.getCoordinate=function(b){return b.coordinates[b.x][b.y]};d.generateGrid=function(b){var e,c;c=[];for(e=0;0<=b?e<b:e>b;0<=b?++e:--e)c.push(function(){var a,c;c=[];for(a=0;0<=b?a<b:a>b;0<=b?++a:--a)c.push(g.Tile.randomLetter());return c}());return c};d.printGrid=function(b){var e;e=this.matrix(b);var c,a,f;f=[];c=0;for(a=e.length;c<a;c++)b=e[c],f.push(" "+b.join(" | "));return f.join("\n")};d.matrix=function(b){var e,c,a,f,d;d=[];e=a=0;for(f=b.length;0<=
f?a<f:a>f;e=0<=f?++a:--a)d.push(function(){var a,d,f;f=[];c=a=0;for(d=b[e].length;0<=d?a<d:a>d;c=0<=d?++a:--a)f.push(b[e][c]);return f}());return d};d.wordList=function(b){var e,c,a,d,k,h;e=b.size;c=b.words;h=[];a=0;for(d=c.length;a<d;a++)b=c[a],g.TileFinder.MIN_TILE_LENGTH<=(k=b.length)&&k<=e&&h.push(b);return h};d.isMatrixQuadratic=function(b){var e,c,a;if(!b)return!1;c=0;for(a=b.length;c<a;c++)if(e=b[c],b.length!==e.length)return!1;return!0};d.sizeMatrix=function(b){if(this.isMatrixQuadratic(b))return b.length};
d.isValidSwapCoordinates=function(b){var e,c,a,d,g,h;a=b.x1;g=b.y1;d=b.x2;h=b.y2;b=b.range;e=1===Math.abs(d-a);c=1===Math.abs(h-g);return(e=e&&c?!1:e||c)&&null!=b?this.inRange({x:a,y:g,range:b})&&this.inRange({x:d,y:h,range:b}):e}}).call(this);
(function(){var g,d,b=[].indexOf||function(b){for(var c=0,a=this.length;c<a;c++)if(c in this&&this[c]===b)return c;return-1};g=this.Scrabble||(this.Scrabble={});d=g.WordFinder=function(){return function(){}}();d.isWord=function(d){return 0<=b.call(d.dictionary,d.word)};d.all=function(b){var c,a,d,k,h;a=b.grid;c=b.dictionary;b=g.TileFinder.all({grid:a,dictionary:c,range:b.range,x:b.x,y:b.y});h=[];d=0;for(k=b.length;d<k;d++)a=b[d],this.isWord({word:a,dictionary:c})&&h.push(a);return h}}).call(this);
