!function(){var a;a=this.Game=function(){function b(b){var c,d,e,f,g;if(null==b&&(b={}),e=b.size,g=b.words,c=b.grid,Util.isMatrixQuadratic(c)?e=Util.sizeMatrix(c):c=void 0,!a.isValidSize(e))throw"Grid size not given";c||(c=Util.generateGrid(e)),f=Util.wordList({size:e,words:g}),d=new Score({grid:c,dictionary:g}),this.size=function(){return e},this.isWord=function(a){return WordFinder.isWord({word:a,dictionary:f})},this.move=function(a){return d.moveScore(a)},this.str=function(){return Util.printGrid(c)},this.matrix=function(){return Util.matrix(c)},this.set=function(a){var b,d,f;return d=a.x,f=a.y,b=a.value,Util.setCoordinate({coordinates:c,range:e,x:d,y:f,value:b})},this.get=function(a){var b,d;return b=a.x,d=a.y,Util.getCoordinate({coordinates:c,x:b,y:d})}}return b.prototype.inRange=function(a){return Util.inRange({value:a,range:this.size()})},b}(),a.isValidSize=function(a){return!a||0>a?!1:!0}}.call(this),function(){var a,b,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10},a=this.Score=function(){function b(b){var d,e;null==b&&(b={}),e=b.grid,d=b.dictionary,this.printGrid=function(){return Util.printGrid(e)},this.matrix=function(){return Util.matrix(e)},this.moveScore=function(b){return a.moveScore({grid:e,dictionary:d,swapCoordinates:b})},this.scoreWord=function(b){return c.call(d,b)>=0?a.scoreWord(b):0},this.words=function(){return a.words({grid:e,dictionary:d})}}return b}(),a.words=function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o;for(e=a.grid,d=a.dictionary,o=[[],e.length],g=o[0],b=o[1],i=k=0;b>=0?b>k:k>b;i=b>=0?++k:--k)for(j=l=0;b>=0?b>l:l>b;j=b>=0?++l:--l)for(h=WordFinder.all({grid:e,dictionary:d,x:i,y:j,range:b}),m=0,n=h.length;n>m;m++)f=h[m],c.call(g,f)<0&&g.push(f);return g},a.move=function(a){var b,c,d,e,f,g,h;return d=a.grid,g=a.swapCoordinates,b=g.x1,e=g.y1,c=g.x2,f=g.y2,h=[d[e][b],d[f][c]],d[f][c]=h[0],d[e][b]=h[1],d},a.moveScore=function(a){var b,c,d,e,f,g;return c=a.grid,b=a.dictionary,e=a.swapCoordinates,g=this.words({grid:c,dictionary:b}),this.move({grid:c,swapCoordinates:e}),f=this.words({grid:c,dictionary:b}),d=this.newWords({before:g,after:f}),{scoreMove:this.scoreWords(d),newWords:d}},a.scoreWord=function(a){var c,d,e,f;for(d=0,e=0,f=a.length;f>e;e++)c=a[e],d+=b[c];return d},a.scoreWords=function(a){var b,c,d,e,f,g;for(g=[0,a.length],c=g[0],b=g[1],e=0,f=a.length;f>e;e++)d=a[e],c+=this.scoreWord(d);return c*b},a.newWords=function(a){var b,d,e,f,g,h;for(e=a.before,d=a.after,h=[],f=0,g=d.length;g>f;f++)b=d[f],c.call(e,b)<0&&h.push(b);return h}}.call(this),function(){var a,b,c,d,e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=this.TileFinder=function(){function a(){}return a}(),a=b.MIN_TILE_LENGTH=2,d=function(a,b){var c,d,e,f,g,h,i,j;for(d=a.grid,g=a.range,c=a.x,h=a.y,i="",e=j=0;g>=0?g>j:j>g;e=g>=0?++j:--j)f=b(e),null!=f&&(i+=f);return i.length===g?i:void 0},c=function(b,c){var d,f,g,h,i,j,k,l,m,n;for(d=b.grid,g=b.range,k=b.x,l=b.y,j=[],i=m=a;g>=a?g>=m:m>=g;i=g>=a?++m:--m)for(f=n=0;i>=0?i>n:n>i;f=i>=0?++n:--n)h=c(i,f),null==h||e.call(j,h)>=0||j.push(h);return j},b.verticalOne=function(a){var b,c,e,f;return c=a.grid,e=a.range,b=a.x,f=a.y,d(a,function(a){var d;return null!=(d=c[f+a])?d[b]:void 0})},b.horizontalOne=function(a){var b,c,e,f;return c=a.grid,e=a.range,b=a.x,f=a.y,d(a,function(a){var d;return null!=(d=c[f])?d[b+a]:void 0})},b.diagonalOne_upperLeft_to_lowerRight=function(a){var b,c,e,f;return c=a.grid,e=a.range,b=a.x,f=a.y,d(a,function(a){var d;return null!=(d=c[f+a])?d[b+a]:void 0})},b.diagonalOne_lowerLeft_to_upperRight=function(a){var b,c,e,f;return c=a.grid,e=a.range,b=a.x,f=a.y,d(a,function(a){var d;return null!=(d=c[f-a])?d[b+a]:void 0})},b.verticalTiles=function(a){var d,e,f,g;return d=a.grid,e=a.range,f=a.x,g=a.y,c(a,function(a,c){return b.verticalOne({grid:d,x:f,y:g-c,range:a})})},b.horizontalTiles=function(a){var d,e,f,g;return d=a.grid,e=a.range,f=a.x,g=a.y,c(a,function(a,c){return b.horizontalOne({grid:d,x:f-c,y:g,range:a})})},b.diagonalTiles_upperLeft_to_lowerRight=function(a){var d,e,f,g;return d=a.grid,e=a.range,f=a.x,g=a.y,c(a,function(a,c){return b.diagonalOne_upperLeft_to_lowerRight({grid:d,x:f-c,y:g-c,range:a})})},b.diagonalTiles_lowerLeft_to_upperRight=function(a){var d,e,f,g;return d=a.grid,e=a.range,f=a.x,g=a.y,c(a,function(a,c){return b.diagonalOne_lowerLeft_to_upperRight({grid:d,x:f-c,y:g+c,range:a})})},b.all=function(a){var b,c,d,f,g,h,i,j,k;for(b=[],k=[this.verticalTiles,this.horizontalTiles,this.diagonalTiles_upperLeft_to_lowerRight,this.diagonalTiles_lowerLeft_to_upperRight],g=0,i=k.length;i>g;g++)for(c=k[g],f=c(a),h=0,j=f.length;j>h;h++)d=f[h],e.call(b,d)<0&&b.push(d);return b}}.call(this),function(){var a,b,c,d,e,f;a=this.Tile=function(){function a(){}return a}(),e={A:9,B:2,C:2,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1},f=0;for(d in e)c=e[d],f+=c;b=function(){var a;a=[];for(d in e)a.push(d);return a}().sort(),a.total=function(){return f},a.alphabet=function(){return b.slice(0)},a.randomLetter=function(){var a,c,g,h;for(a=Math.ceil(Math.random()*f),c=1,g=0,h=b.length;h>g;g++)if(d=b[g],c+=e[d],c>a)return d}}.call(this),function(){var a;a=this.Util=function(){function a(){}return a}(),a.isInteger=function(a){return a===Math.round(a)},a.inRange=function(a){var b,c,d,e;return c=a.value,b=a.range,d=a.x,e=a.y,null!=c?this.isInteger(c)&&c>=0&&b>c:null!=d&&null!=e?this.inRange({value:d,range:b})&&this.inRange({value:e,range:b}):void 0},a.setCoordinate=function(a){var b,c,d,e,f;return b=a.coordinates,c=a.range,e=a.x,f=a.y,d=a.value,b[e]||(b[e]=[]),b[e][f]=this.inRange({value:e,range:c})&&this.inRange({value:f,range:c})?d:void 0,!!b[e][f]},a.getCoordinate=function(a){var b,c,d;return b=a.coordinates,c=a.x,d=a.y,b[c][d]},a.generateGrid=function(a){var b,c,d,e;for(e=[],b=d=0;a>=0?a>d:d>a;b=a>=0?++d:--d)e.push(function(){var b,d;for(d=[],c=b=0;a>=0?a>b:b>a;c=a>=0?++b:--b)d.push(Tile.randomLetter());return d}());return e},a.printGrid=function(a){var b,c,d;return d=this.matrix(a),c=function(){var a,c,e;for(e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(" "+b.join(" | "));return e}(),c.join("\n")},a.matrix=function(a){var b,c,d,e,f;for(f=[],b=d=0,e=a.length;e>=0?e>d:d>e;b=e>=0?++d:--d)f.push(function(){var d,e,f;for(f=[],c=d=0,e=a[b].length;e>=0?e>d:d>e;c=e>=0?++d:--d)f.push(a[b][c]);return f}());return f},a.wordList=function(a){var b,c,d,e,f,g,h;for(b=a.size,d=a.words,h=[],e=0,f=d.length;f>e;e++)c=d[e],TileFinder.MIN_TILE_LENGTH<=(g=c.length)&&b>=g&&h.push(c);return h},a.isMatrixQuadratic=function(a){var b,c,d;if(!a)return!1;for(c=0,d=a.length;d>c;c++)if(b=a[c],a.length!==b.length)return!1;return!0},a.sizeMatrix=function(a){return this.isMatrixQuadratic(a)?a.length:void 0},a.isValidSwapCoordinates=function(a){var b,c,d,e,f,g,h,i,j;return g=a.x1,i=a.y1,h=a.x2,j=a.y2,f=a.range,c=1===Math.abs(h-g),d=1===Math.abs(j-i),b=c&&d,e=b?!1:c||d,e&&null!=f?this.inRange({x:g,y:i,size:f})&&this.inRange({x:h,y:j,size:f}):e}}.call(this),function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=this.WordFinder=function(){function a(){}return a}(),a.isWord=function(a){var c,d;return d=a.word,c=a.dictionary,b.call(c,d)>=0},a.all=function(a){var b,c,d,e,f,g,h,i,j,k;for(d=a.grid,c=a.dictionary,e=a.range,g=a.x,h=a.y,b=TileFinder.all(a),k=[],i=0,j=b.length;j>i;i++)f=b[i],this.isWord({word:f,dictionary:c})&&k.push(f);return k}}.call(this);