!function(){var a,b;b=this.Scrabble||(this.Scrabble={}),a=b.Game=function(){function c(c){var d,e,f,g,h;if(f=c.size,h=c.words,d=c.grid,b.Util.isMatrixQuadratic(d)?f=b.Util.sizeMatrix(d):d=void 0,!a.isValidSize(f))throw"Grid size not given";d||(d=b.Util.generateGrid(f)),g=b.Util.wordList({size:f,words:h}),e=new b.Score({grid:d,dictionary:h}),this.size=function(){return f},this.isWord=function(a){return b.WordFinder.isWord({word:a,dictionary:g})},this.move=function(a){return e.moveScore(a)},this.str=function(){return b.Util.printGrid(d)},this.matrix=function(){return b.Util.matrix(d)},this.set=function(a){var c,e,g;return e=a.x,g=a.y,c=a.value,b.Util.setCoordinate({coordinates:d,range:f,x:e,y:g,value:c})},this.get=function(a){var c,e;return c=a.x,e=a.y,b.Util.getCoordinate({coordinates:d,x:c,y:e})}}return c.prototype.inRange=function(a){return b.Util.inRange({value:a,range:this.size()})},c}(),a.isValidSize=function(a){return!a||0>a?!1:!0}}.call(this),function(){var a,b,c,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=this.Scrabble||(this.Scrabble={}),c={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10},a=b.Score=function(){function c(c){var e,f;f=c.grid,e=c.dictionary,this.printGrid=function(){return b.Util.printGrid(f)},this.matrix=function(){return b.Util.matrix(f)},this.moveScore=function(b){return a.moveScore({grid:f,dictionary:e,swapCoordinates:b})},this.scoreWord=function(b){return d.call(e,b)>=0?a.scoreWord(b):0},this.words=function(){return a.words({grid:f,dictionary:e})}}return c}(),a.words=function(a){var c,e,f,g,h,i,j,k,l,m,n,o,p;for(f=a.grid,e=a.dictionary,p=[[],f.length],h=p[0],c=p[1],j=l=0;c>=0?c>l:l>c;j=c>=0?++l:--l)for(k=m=0;c>=0?c>m:m>c;k=c>=0?++m:--m)for(i=b.WordFinder.all({grid:f,dictionary:e,x:j,y:k,range:c}),n=0,o=i.length;o>n;n++)g=i[n],d.call(h,g)<0&&h.push(g);return h},a.move=function(a){var c,d,e,f,g,h,i,j,k;return e=a.grid,j=a.swapCoordinates,c=j.x1,h=j.y1,d=j.x2,i=j.y2,g=b.Util.sizeMatrix(e),f=b.Util.isValidSwapCoordinates({x1:c,y1:h,x2:d,y2:i,range:g}),null!=g&&f?(k=[e[h][c],e[i][d]],e[i][d]=k[0],e[h][c]=k[1],!0):!1},a.moveScore=function(a){var b,c,d,e,f,g;return c=a.grid,b=a.dictionary,e=a.swapCoordinates,g=this.words({grid:c,dictionary:b}),this.move({grid:c,swapCoordinates:e})?(f=this.words({grid:c,dictionary:b}),d=this.newWords({before:g,after:f}),{scoreMove:this.scoreWords(d),newWords:d}):void 0},a.scoreWord=function(a){var b,d,e,f;for(d=0,e=0,f=a.length;f>e;e++)b=a[e],d+=c[b];return d},a.scoreWords=function(a){var b,c,d,e,f,g;for(g=[0,a.length],c=g[0],b=g[1],e=0,f=a.length;f>e;e++)d=a[e],c+=this.scoreWord(d);return c*b},a.newWords=function(a){var b,c,e,f,g,h;for(e=a.before,c=a.after,h=[],f=0,g=c.length;g>f;f++)b=c[f],d.call(e,b)<0&&h.push(b);return h}}.call(this),function(){var a,b,c,d,e,f=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=this.Scrabble||(this.Scrabble={}),c=b.TileFinder=function(){function a(){}return a}(),a=c.MIN_TILE_LENGTH=2,e=function(a,b){var c,d,e,f,g,h,i,j;for(d=a.grid,g=a.range,c=a.x,h=a.y,i="",e=j=0;g>=0?g>j:j>g;e=g>=0?++j:--j)f=b(e),null!=f&&(i+=f);return i.length===g?i:void 0},d=function(b,c){var d,e,g,h,i,j,k,l,m,n;for(d=b.grid,g=b.range,k=b.x,l=b.y,j=[],i=m=a;g>=a?g>=m:m>=g;i=g>=a?++m:--m)for(e=n=0;i>=0?i>n:n>i;e=i>=0?++n:--n)h=c(i,e),null==h||f.call(j,h)>=0||j.push(h);return j},c.verticalOne=function(a){var b,c,d,f,g;return c=a.grid,f=a.range,b=a.x,g=a.y,d={grid:c,range:f,x:b,y:g},e(d,function(a){var d;return null!=(d=c[g+a])?d[b]:void 0})},c.horizontalOne=function(a){var b,c,d,f,g;return c=a.grid,f=a.range,b=a.x,g=a.y,d={grid:c,range:f,x:b,y:g},e(d,function(a){var d;return null!=(d=c[g])?d[b+a]:void 0})},c.diagonalOne_upperLeft_to_lowerRight=function(a){var b,c,d,f,g;return c=a.grid,f=a.range,b=a.x,g=a.y,d={grid:c,range:f,x:b,y:g},e(d,function(a){var d;return null!=(d=c[g+a])?d[b+a]:void 0})},c.diagonalOne_lowerLeft_to_upperRight=function(a){var b,c,d,f,g;return c=a.grid,f=a.range,b=a.x,g=a.y,d={grid:c,range:f,x:b,y:g},e(d,function(a){var d;return null!=(d=c[g-a])?d[b+a]:void 0})},c.verticalTiles=function(a){var b,e,f,g,h;return b=a.grid,f=a.range,g=a.x,h=a.y,e={grid:b,range:f,x:g,y:h},d(e,function(a,d){return c.verticalOne({grid:b,x:g,y:h-d,range:a})})},c.horizontalTiles=function(a){var b,e,f,g,h;return b=a.grid,f=a.range,g=a.x,h=a.y,e={grid:b,range:f,x:g,y:h},d(e,function(a,d){return c.horizontalOne({grid:b,x:g-d,y:h,range:a})})},c.diagonalTiles_upperLeft_to_lowerRight=function(a){var b,e,f,g,h;return b=a.grid,f=a.range,g=a.x,h=a.y,e={grid:b,range:f,x:g,y:h},d(e,function(a,d){return c.diagonalOne_upperLeft_to_lowerRight({grid:b,x:g-d,y:h-d,range:a})})},c.diagonalTiles_lowerLeft_to_upperRight=function(a){var b,e,f,g,h;return b=a.grid,f=a.range,g=a.x,h=a.y,e={grid:b,range:f,x:g,y:h},d(e,function(a,d){return c.diagonalOne_lowerLeft_to_upperRight({grid:b,x:g-d,y:h+d,range:a})})},c.all=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o;for(d=a.grid,e=a.range,i=a.x,j=a.y,b=[],o=[this.verticalTiles,this.horizontalTiles,this.diagonalTiles_upperLeft_to_lowerRight,this.diagonalTiles_lowerLeft_to_upperRight],k=0,m=o.length;m>k;k++)for(c=o[k],h=c({grid:d,range:e,x:i,y:j}),l=0,n=h.length;n>l;l++)g=h[l],f.call(b,g)<0&&b.push(g);return b}}.call(this),function(){var a,b,c,d,e,f,g;a=this.Scrabble||(this.Scrabble={}),b=a.Tile=function(){function a(){}return a}(),f={A:9,B:2,C:2,D:4,E:12,F:2,G:3,H:2,I:9,J:1,K:1,L:4,M:2,N:6,O:8,P:2,Q:1,R:6,S:4,T:6,U:4,V:2,W:2,X:1,Y:2,Z:1},g=0;for(e in f)d=f[e],g+=d;c=function(){var a;a=[];for(e in f)a.push(e);return a}().sort(),b.total=function(){return g},b.alphabet=function(){return c.slice(0)},b.randomLetter=function(){var a,b,d,h;for(a=Math.ceil(Math.random()*g),b=1,d=0,h=c.length;h>d;d++)if(e=c[d],b+=f[e],b>a)return e}}.call(this),function(){var a,b;a=this.Scrabble||(this.Scrabble={}),b=a.Util=function(){function a(){}return a}(),b.isInteger=function(a){return a===Math.round(a)},b.inRange=function(a){var b,c,d,e;return c=a.value,b=a.range,d=a.x,e=a.y,null!=c?this.isInteger(c)&&c>=0&&b>c:null!=d&&null!=e?this.inRange({value:d,range:b})&&this.inRange({value:e,range:b}):void 0},b.setCoordinate=function(a){var b,c,d,e,f;return b=a.coordinates,c=a.range,e=a.x,f=a.y,d=a.value,b[e]||(b[e]=[]),b[e][f]=this.inRange({value:e,range:c})&&this.inRange({value:f,range:c})?d:void 0,!!b[e][f]},b.getCoordinate=function(a){var b,c,d;return b=a.coordinates,c=a.x,d=a.y,b[c][d]},b.generateGrid=function(b){var c,d,e,f;for(f=[],c=e=0;b>=0?b>e:e>b;c=b>=0?++e:--e)f.push(function(){var c,e;for(e=[],d=c=0;b>=0?b>c:c>b;d=b>=0?++c:--c)e.push(a.Tile.randomLetter());return e}());return f},b.printGrid=function(a){var b,c,d;return d=this.matrix(a),c=function(){var a,c,e;for(e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(" "+b.join(" | "));return e}(),c.join("\n")},b.matrix=function(a){var b,c,d,e,f;for(f=[],b=d=0,e=a.length;e>=0?e>d:d>e;b=e>=0?++d:--d)f.push(function(){var d,e,f;for(f=[],c=d=0,e=a[b].length;e>=0?e>d:d>e;c=e>=0?++d:--d)f.push(a[b][c]);return f}());return f},b.wordList=function(b){var c,d,e,f,g,h,i;for(c=b.size,e=b.words,i=[],f=0,g=e.length;g>f;f++)d=e[f],a.TileFinder.MIN_TILE_LENGTH<=(h=d.length)&&c>=h&&i.push(d);return i},b.isMatrixQuadratic=function(a){var b,c,d;if(!a)return!1;for(c=0,d=a.length;d>c;c++)if(b=a[c],a.length!==b.length)return!1;return!0},b.sizeMatrix=function(a){return this.isMatrixQuadratic(a)?a.length:void 0},b.isValidSwapCoordinates=function(a){var b,c,d,e,f,g,h,i,j;return g=a.x1,i=a.y1,h=a.x2,j=a.y2,f=a.range,c=1===Math.abs(h-g),d=1===Math.abs(j-i),b=c&&d,e=b?!1:c||d,e&&null!=f?this.inRange({x:g,y:i,range:f})&&this.inRange({x:h,y:j,range:f}):e}}.call(this),function(){var a,b,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=this.Scrabble||(this.Scrabble={}),b=a.WordFinder=function(){function a(){}return a}(),b.isWord=function(a){var b,d;return d=a.word,b=a.dictionary,c.call(b,d)>=0},b.all=function(b){var c,d,e,f,g,h,i,j,k,l;for(e=b.grid,d=b.dictionary,f=b.range,h=b.x,i=b.y,c=a.TileFinder.all({grid:e,dictionary:d,range:f,x:h,y:i}),l=[],j=0,k=c.length;k>j;j++)g=c[j],this.isWord({word:g,dictionary:d})&&l.push(g);return l}}.call(this);